/**
*@author qiang.niu(http://www.siptea.cn)
*/
"use strict";function toPX(a,b,c){var d,e=a.runtimeStyle&&a.runtimeStyle[b],f=a.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(c)&&/^-?\d/.test(c)&&(d=f.left,e&&(a.runtimeStyle.left=a.currentStyle.left),f.left="fontSize"===b?"1em":c||0,c=f.pixelLeft+"px",f.left=d,e&&(a.runtimeStyle.left=e)),/^(thin|medium|thick)$/i.test(c)?c:Math.round(parseFloat(c))+"px"}function asInt(a){return parseInt(a,10)}function isPercentage(a){return a.toString().indexOf("%")!==-1}function parseBackgroundSizePosition(a,b,c,d){if(a=(a||"").split(","),a=a[d||0]||a[0]||"auto",a=_html2canvas.Util.trimText(a).split(" "),"backgroundSize"===c&&a[0]&&a[0].match(/^(cover|contain|auto)$/))return a;if(a[0]=a[0].indexOf("%")===-1?toPX(b,c+"X",a[0]):a[0],void 0===a[1]){if("backgroundSize"===c)return a[1]="auto",a;a[1]=a[0]}return a[1]=a[1].indexOf("%")===-1?toPX(b,c+"Y",a[1]):a[1],a}function h2cRenderContext(a,b){var c=[];return{storage:c,width:a,height:b,clip:function(){c.push({type:"function",name:"clip",arguments:arguments})},translate:function(){c.push({type:"function",name:"translate",arguments:arguments})},fill:function(){c.push({type:"function",name:"fill",arguments:arguments})},save:function(){c.push({type:"function",name:"save",arguments:arguments})},restore:function(){c.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){c.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){c.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var a=[];return c.push({type:"function",name:"drawShape",arguments:a}),{moveTo:function(){a.push({name:"moveTo",arguments:arguments})},lineTo:function(){a.push({name:"lineTo",arguments:arguments})},arcTo:function(){a.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){a.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){a.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){c.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){c.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(a,b){return c.push({type:"variable",name:a,arguments:b}),b}}}var _html2canvas={},previousElement,computedCSS,html2canvas;_html2canvas.Util={},_html2canvas.Util.log=function(a){_html2canvas.logging&&window.console&&window.console.log&&window.console.log(a)},_html2canvas.Util.trimText=function(a){return function(b){return a?a.apply(b):((b||"")+"").replace(/^\s+|\s+$/g,"")}}(String.prototype.trim),_html2canvas.Util.asFloat=function(a){return parseFloat(a)},function(){var a=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,b=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;_html2canvas.Util.parseTextShadows=function(c){if(!c||"none"===c)return[];for(var d=c.match(a),e=[],f=0;d&&f<d.length;f++){var g=d[f].match(b);e.push({color:g[0],offsetX:g[1]?g[1].replace("px",""):0,offsetY:g[2]?g[2].replace("px",""):0,blur:g[3]?g[3].replace("px",""):0})}return e}}(),_html2canvas.Util.parseBackgroundImage=function(a){var b,c,d,e,f,g,h,i,j=" \r\n\t",k=[],l=0,m=0,n=function(){b&&('"'===c.substr(0,1)&&(c=c.substr(1,c.length-2)),c&&i.push(c),"-"===b.substr(0,1)&&(e=b.indexOf("-",1)+1)>0&&(d=b.substr(0,e),b=b.substr(e)),k.push({prefix:d,method:b.toLowerCase(),value:f,args:i})),i=[],b=d=c=f=""};n();for(var o=0,p=a.length;o<p;o++)if(g=a[o],!(0===l&&j.indexOf(g)>-1)){switch(g){case'"':h?h===g&&(h=null):h=g;break;case"(":if(h)break;if(0===l){l=1,f+=g;continue}m++;break;case")":if(h)break;if(1===l){if(0===m){l=0,f+=g,n();continue}m--}break;case",":if(h)break;if(0===l){n();continue}if(1===l&&0===m&&!b.match(/^url$/i)){i.push(c),c="",f+=g;continue}}f+=g,0===l?b+=g:c+=g}return n(),k},_html2canvas.Util.Bounds=function(a){var b,c={};return a.getBoundingClientRect&&(b=a.getBoundingClientRect(),c.top=b.top,c.bottom=b.bottom||b.top+b.height,c.left=b.left,c.width=a.offsetWidth,c.height=a.offsetHeight?a.offsetHeight:1),c},_html2canvas.Util.OffsetBounds=function(a){var b=a.offsetParent?_html2canvas.Util.OffsetBounds(a.offsetParent):{top:0,left:0};return{top:a.offsetTop+b.top,bottom:a.style.bottom?parseInt(a.style.bottom.substr(0,a.style.bottom.length-2)):a.offsetTop+a.offsetHeight+b.top,left:a.offsetLeft+b.left,width:a.offsetWidth,height:a.offsetHeight}},_html2canvas.Util.getCSS=function(a,b,c){previousElement!==a&&(computedCSS=document.defaultView.getComputedStyle(a,null));var d=computedCSS[b];if(/^background(Size|Position)$/.test(b))return parseBackgroundSizePosition(d,a,b,c);if(/border(Top|Bottom)(Left|Right)Radius/.test(b)){var e=d.split(" ");return e.length<=1&&(e[1]=e[0]),e.map(asInt)}return d},_html2canvas.Util.resizeBounds=function(a,b,c,d,e){var f,g,h=c/d,i=a/b;return e&&"auto"!==e?h<i^"contain"===e?(g=d,f=d*i):(f=c,g=c/i):(f=c,g=d),{width:f,height:g}},_html2canvas.Util.BackgroundPosition=function(a,b,c,d,e){var f,g,h=_html2canvas.Util.getCSS(a,"backgroundPosition",d);return 1===h.length&&(h=[h[0],h[0]]),f=isPercentage(h[0])?(b.width-(e||c).width)*(parseFloat(h[0])/100):parseInt(h[0],10),g="auto"===h[1]?f/c.width*c.height:isPercentage(h[1])?(b.height-(e||c).height)*parseFloat(h[1])/100:parseInt(h[1],10),"auto"===h[0]&&(f=g/c.height*c.width),{left:f,top:g}},_html2canvas.Util.BackgroundSize=function(a,b,c,d){var e,f,g=_html2canvas.Util.getCSS(a,"backgroundSize",d);if(1===g.length&&(g=[g[0],g[0]]),isPercentage(g[0]))e=b.width*parseFloat(g[0])/100;else{if(/contain|cover/.test(g[0]))return _html2canvas.Util.resizeBounds(c.width,c.height,b.width,b.height,g[0]);e=parseInt(g[0],10)}return f="auto"===g[0]&&"auto"===g[1]?c.height:"auto"===g[1]?e/c.width*c.height:isPercentage(g[1])?b.height*parseFloat(g[1])/100:parseInt(g[1],10),"auto"===g[0]&&(e=f/c.height*c.width),{width:e,height:f}},_html2canvas.Util.BackgroundRepeat=function(a,b){var c=_html2canvas.Util.getCSS(a,"backgroundRepeat").split(",").map(_html2canvas.Util.trimText);return c[b]||c[0]},_html2canvas.Util.Extend=function(a,b){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},_html2canvas.Util.Children=function(a){var b;try{b=a.nodeName&&"IFRAME"===a.nodeName.toUpperCase()?a.contentDocument||a.contentWindow.document:function(a){var b=[];return null!==a&&!function(a,b){var c=a.length,d=0;if("number"==typeof b.length)for(var e=b.length;d<e;d++)a[c++]=b[d];else for(;void 0!==b[d];)a[c++]=b[d++];return a.length=c,a}(b,a),b}(a.childNodes)}catch(a){_html2canvas.Util.log("html2canvas.Util.Children failed with exception: "+a.message),b=[]}return b},_html2canvas.Util.isTransparent=function(a){return!a||"transparent"===a||"rgba(0, 0, 0, 0)"===a},_html2canvas.Util.Font=function(){var a={};return function(b,c,d){if(void 0!==a[b+"-"+c])return a[b+"-"+c];var e,f,g,h=d.createElement("div"),i=d.createElement("img"),j=d.createElement("span"),k="Hidden Text";return h.style.visibility="hidden",h.style.fontFamily=b,h.style.fontSize=c,h.style.margin=0,h.style.padding=0,d.body.appendChild(h),i.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",i.width=1,i.height=1,i.style.margin=0,i.style.padding=0,i.style.verticalAlign="baseline",j.style.fontFamily=b,j.style.fontSize=c,j.style.margin=0,j.style.padding=0,j.appendChild(d.createTextNode(k)),h.appendChild(j),h.appendChild(i),e=i.offsetTop-j.offsetTop+1,h.removeChild(j),h.appendChild(d.createTextNode(k)),h.style.lineHeight="normal",i.style.verticalAlign="super",f=i.offsetTop-h.offsetTop+1,g={baseline:e,lineWidth:1,middle:f},a[b+"-"+c]=g,d.body.removeChild(h),g}}(),function(){function a(a){return function(c){try{a.addColorStop(c.stop,c.color)}catch(a){b.log(["failed to add color stop: ",a,"; tried to add: ",c])}}}var b=_html2canvas.Util,c={};_html2canvas.Generate=c;var d=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];c.parseGradient=function(a,b){var c,e,f,g,h,i,j,k,l,m,n,o,p=d.length;for(e=0;e<p&&!(f=a.match(d[e]));e+=1);if(f)switch(f[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(c={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},h=f[2].match(/\w+/g))for(i=h.length,e=0;e<i;e+=1)switch(h[e]){case"top":c.y0=0,c.y1=b.height;break;case"right":c.x0=b.width,c.x1=0;break;case"bottom":c.y0=b.height,c.y1=0;break;case"left":c.x0=0,c.x1=b.width}if(null===c.x0&&null===c.x1&&(c.x0=c.x1=b.width/2),null===c.y0&&null===c.y1&&(c.y0=c.y1=b.height/2),h=f[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(i=h.length,j=1/Math.max(i-1,1),e=0;e<i;e+=1)k=h[e].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),k[2]?(g=parseFloat(k[2]),g/="%"===k[3]?100:b.width):g=e*j,c.colorStops.push({color:k[1],stop:g});break;case"-webkit-gradient":if(c={type:"radial"===f[2]?"circle":f[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},h=f[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),h&&(c.x0=h[1]*b.width/100,c.y0=h[2]*b.height/100,c.x1=h[3]*b.width/100,c.y1=h[4]*b.height/100),h=f[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(i=h.length,e=0;e<i;e+=1)k=h[e].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),g=parseFloat(k[2]),"from"===k[1]&&(g=0),"to"===k[1]&&(g=1),c.colorStops.push({color:k[3],stop:g});break;case"-moz-linear-gradient":if(c={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},h=f[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),h&&(c.x0=h[1]*b.width/100,c.y0=h[2]*b.height/100,c.x1=b.width-c.x0,c.y1=b.height-c.y0),h=f[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(i=h.length,j=1/Math.max(i-1,1),e=0;e<i;e+=1)k=h[e].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),k[2]?(g=parseFloat(k[2]),k[3]&&(g/=100)):g=e*j,c.colorStops.push({color:k[1],stop:g});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(c={type:"circle",x0:0,y0:0,x1:b.width,y1:b.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},h=f[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),h&&(c.cx=h[1]*b.width/100,c.cy=h[2]*b.height/100),h=f[3].match(/\w+/),k=f[4].match(/[a-z\-]*/),h&&k)switch(k[0]){case"farthest-corner":case"cover":case"":l=Math.sqrt(Math.pow(c.cx,2)+Math.pow(c.cy,2)),m=Math.sqrt(Math.pow(c.cx,2)+Math.pow(c.y1-c.cy,2)),n=Math.sqrt(Math.pow(c.x1-c.cx,2)+Math.pow(c.y1-c.cy,2)),o=Math.sqrt(Math.pow(c.x1-c.cx,2)+Math.pow(c.cy,2)),c.rx=c.ry=Math.max(l,m,n,o);break;case"closest-corner":l=Math.sqrt(Math.pow(c.cx,2)+Math.pow(c.cy,2)),m=Math.sqrt(Math.pow(c.cx,2)+Math.pow(c.y1-c.cy,2)),n=Math.sqrt(Math.pow(c.x1-c.cx,2)+Math.pow(c.y1-c.cy,2)),o=Math.sqrt(Math.pow(c.x1-c.cx,2)+Math.pow(c.cy,2)),c.rx=c.ry=Math.min(l,m,n,o);break;case"farthest-side":"circle"===h[0]?c.rx=c.ry=Math.max(c.cx,c.cy,c.x1-c.cx,c.y1-c.cy):(c.type=h[0],c.rx=Math.max(c.cx,c.x1-c.cx),c.ry=Math.max(c.cy,c.y1-c.cy));break;case"closest-side":case"contain":"circle"===h[0]?c.rx=c.ry=Math.min(c.cx,c.cy,c.x1-c.cx,c.y1-c.cy):(c.type=h[0],c.rx=Math.min(c.cx,c.x1-c.cx),c.ry=Math.min(c.cy,c.y1-c.cy))}if(h=f[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(i=h.length,j=1/Math.max(i-1,1),e=0;e<i;e+=1)k=h[e].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),k[2]?(g=parseFloat(k[2]),g/="%"===k[3]?100:b.width):g=e*j,c.colorStops.push({color:k[1],stop:g})}return c},c.Gradient=function(b,c){if(0!==c.width&&0!==c.height){var d,e,f=document.createElement("canvas"),g=f.getContext("2d");if(f.width=c.width,f.height=c.height,d=_html2canvas.Generate.parseGradient(b,c))switch(d.type){case"linear":e=g.createLinearGradient(d.x0,d.y0,d.x1,d.y1),d.colorStops.forEach(a(e)),g.fillStyle=e,g.fillRect(0,0,c.width,c.height);break;case"circle":e=g.createRadialGradient(d.cx,d.cy,0,d.cx,d.cy,d.rx),d.colorStops.forEach(a(e)),g.fillStyle=e,g.fillRect(0,0,c.width,c.height);break;case"ellipse":var h=document.createElement("canvas"),i=h.getContext("2d"),j=Math.max(d.rx,d.ry),k=2*j;h.width=h.height=k,e=i.createRadialGradient(d.rx,d.ry,0,d.rx,d.ry,j),d.colorStops.forEach(a(e)),i.fillStyle=e,i.fillRect(0,0,k,k),g.fillStyle=d.colorStops[d.colorStops.length-1].color,g.fillRect(0,0,f.width,f.height),g.drawImage(h,d.cx-d.rx,d.cy-d.ry,2*d.rx,2*d.ry)}return f}},c.ListAlpha=function(a){var b,c="";do b=a%26,c=String.fromCharCode(b+64)+c,a/=26;while(26*a>26);return c},c.ListRoman=function(a){var b,c=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],d=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],e="",f=c.length;if(a<=0||a>=4e3)return a;for(b=0;b<f;b+=1)for(;a>=d[b];)a-=d[b],e+=c[b];return e}}(),_html2canvas.Parse=function(a,b,c){function d(){var a=pa(document.documentElement,"backgroundColor"),b=la.isTransparent(a)&&ia===document.body,d=ea(ia,null,!1,b);e(ia),ha(ia,d,function(){b&&(a=d.backgroundColor),f(),la.log("Done parsing, moving to Render."),c({backgroundColor:a,stack:d})})}function e(a){function b(){for(var a=/:before|:after/,b=document.styleSheets,c=0,d=b.length;c<d;c++)try{for(var e=b[c].cssRules,f=0,g=e.length;f<g;f++)a.test(e[f].selectorText)&&h.push(e[f].selectorText)}catch(a){}for(c=0,d=h.length;c<d;c++)h[c]=h[c].match(/(^[^:]*)/)[1]}function c(a){var b;try{b=document.querySelectorAll(h.join(","))}catch(a){return}for(var c=0,e=b.length;c<e;c++)d(b[c])}function d(a){var b=S(a,":before"),c=S(a,":after");b&&f.push({type:"before",pseudo:b,el:a}),c&&f.push({type:"after",pseudo:c,el:a})}function e(){f.forEach(function(a){g(a.el,qa+"-parent")}),f.forEach(function(a){"before"===a.type?a.el.insertBefore(a.pseudo,a.el.firstChild):a.el.appendChild(a.pseudo)})}var f=[],h=[];b(),c(a),e()}function f(){oa.removeChild(ra);for(var a=document.getElementsByClassName(qa+"-element");a.length;)a[0].parentNode.removeChild(a[0]);for(var b=document.getElementsByClassName(qa+"-parent");b.length;)h(b[0],qa+"-parent")}function g(a,b){a.classList?a.classList.add(b):a.className=a.className+" "+b}function h(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(b,"").trim()}function i(){return Math.max(Math.max(ka.body.scrollWidth,ka.documentElement.scrollWidth),Math.max(ka.body.offsetWidth,ka.documentElement.offsetWidth),Math.max(ka.body.clientWidth,ka.documentElement.clientWidth))}function j(){return Math.max(Math.max(ka.body.scrollHeight,ka.documentElement.scrollHeight),Math.max(ka.body.offsetHeight,ka.documentElement.offsetHeight),Math.max(ka.body.clientHeight,ka.documentElement.clientHeight))}function k(a,b){var c=parseInt(pa(a,b),10);return isNaN(c)?0:c}function l(a,b,c,d,e,f){"transparent"!==f&&(a.setVariable("fillStyle",f),a.fillRect(b,c,d,e),ja+=1)}function m(a,b,c){if(a.length>0)return b+c.toUpperCase()}function n(a,b){switch(b){case"lowercase":return a.toLowerCase();case"capitalize":return a.replace(/(^|\s|:|-|\(|\))([a-z])/g,m);case"uppercase":return a.toUpperCase();default:return a}}function o(a){return/^(normal|none|0px)$/.test(a)}function p(a,b,c,d){null!==a&&la.trimText(a).length>0&&(d.fillText(a,b,c),ja+=1)}function q(a,b,c,d){var e=!1,f=pa(b,"fontWeight"),g=pa(b,"fontFamily"),h=pa(b,"fontSize"),i=la.parseTextShadows(pa(b,"textShadow"));switch(parseInt(f,10)){case 401:f="bold";break;case 400:f="normal"}if(a.setVariable("fillStyle",d),a.setVariable("font",[pa(b,"fontStyle"),pa(b,"fontVariant"),f,h,g].join(" ")),a.setVariable("textAlign",e?"right":"left"),i.length&&(a.setVariable("shadowColor",i[0].color),a.setVariable("shadowOffsetX",i[0].offsetX),a.setVariable("shadowOffsetY",i[0].offsetY),a.setVariable("shadowBlur",i[0].blur)),"none"!==c)return la.Font(g,h,ka)}function r(a,b,c,d,e){switch(b){case"underline":l(a,c.left,Math.round(c.top+d.baseline+d.lineWidth),c.width,1,e);break;case"overline":l(a,c.left,Math.round(c.top),c.width,1,e);break;case"line-through":l(a,c.left,Math.ceil(c.top+d.middle+d.lineWidth),c.width,1,e)}}function s(a,b,c,d,e){var f;if(ma.rangeBounds&&!e)"none"===c&&0===la.trimText(b).length||(f=t(b,a.node,a.textOffset)),a.textOffset+=b.length;else if(a.node&&"string"==typeof a.node.nodeValue){var g=d?a.node.splitText(b.length):null;f=u(a.node,e),a.node=g}return f}function t(a,b,c){var d=ka.createRange();return d.setStart(b,c),d.setEnd(b,c+a.length),d.getBoundingClientRect()}function u(a,b){var c=a.parentNode,d=ka.createElement("wrapper"),e=a.cloneNode(!0);d.appendChild(a.cloneNode(!0)),c.replaceChild(d,a);var f=b?la.OffsetBounds(d):la.Bounds(d);return c.replaceChild(e,d),f}function v(a,c,d){var e,f,g=d.ctx,h=pa(a,"color"),i=pa(a,"textDecoration"),j=pa(a,"textAlign"),k={node:c,textOffset:0};la.trimText(c.nodeValue).length>0&&(c.nodeValue=n(c.nodeValue,pa(a,"textTransform")),j=j.replace(["-webkit-auto"],["auto"]),f=!b.letterRendering&&/^(left|right|justify|auto)$/.test(j)&&o(pa(a,"letterSpacing"))?c.nodeValue.split(/(\b| )/):c.nodeValue.split(""),e=q(g,a,i,h),b.chinese&&f.forEach(function(a,b){/.*[\u4E00-\u9FA5].*$/.test(a)&&(a=a.split(""),a.unshift(b,1),f.splice.apply(f,a))}),f.forEach(function(a,b){var c=s(k,a,i,b<f.length-1,d.transform.matrix);c&&(p(a,c.left,c.bottom,g),r(g,i,c,e,h))}))}function w(a,b){var c,d,e=ka.createElement("boundelement");return e.style.display="inline",c=a.style.listStyleType,a.style.listStyleType="none",e.appendChild(ka.createTextNode(b)),a.insertBefore(e,a.firstChild),d=la.Bounds(e),a.removeChild(e),a.style.listStyleType=c,d}function x(a){var b=-1,c=1,d=a.parentNode.childNodes;if(a.parentNode){for(;d[++b]!==a;)1===d[b].nodeType&&c++;return c}return-1}function y(a,b){var c,d=x(a);switch(b){case"decimal":c=d;break;case"decimal-leading-zero":c=1===d.toString().length?d="0"+d.toString():d.toString();break;case"upper-roman":c=_html2canvas.Generate.ListRoman(d);break;case"lower-roman":c=_html2canvas.Generate.ListRoman(d).toLowerCase();break;case"lower-alpha":c=_html2canvas.Generate.ListAlpha(d).toLowerCase();break;case"upper-alpha":c=_html2canvas.Generate.ListAlpha(d)}return c+". "}function z(a,b,c){var d,e,f,g=b.ctx,h=pa(a,"listStyleType");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(h)){if(e=y(a,h),f=w(a,e),q(g,a,"none",pa(a,"color")),"inside"!==pa(a,"listStylePosition"))return;g.setVariable("textAlign","left"),d=c.left,p(e,d,f.bottom,g)}}function A(b){var c=a[b];return!(!c||c.succeeded!==!0)&&c.img}function B(a,b){var c=Math.max(a.left,b.left),d=Math.max(a.top,b.top),e=Math.min(a.left+a.width,b.left+b.width),f=Math.min(a.top+a.height,b.top+b.height);return{left:c,top:d,width:e-c,height:f-d}}function C(a,b,c){var d,e="static"!==b.cssPosition,f=e?pa(a,"zIndex"):"auto",g=pa(a,"opacity"),h="none"!==pa(a,"cssFloat");b.zIndex=d=D(f),d.isPositioned=e,d.isFloated=h,d.opacity=g,d.ownStacking="auto"!==f||g<1,d.depth=c?c.zIndex.depth+1:0,c&&c.zIndex.children.push(b)}function D(a){return{depth:0,zindex:a,children:[]}}function E(a,b,c,d,e){var f=k(b,"paddingLeft"),g=k(b,"paddingTop"),h=k(b,"paddingRight"),i=k(b,"paddingBottom"),j=k(b,"marginLeft"),l=k(b,"marginTop");R(a,c,0,0,c.width,c.height,d.left+f+e[3].width-j,d.top+g+e[0].width-l,d.width-(e[1].width+e[3].width+f+h),d.height-(e[0].width+e[2].width+g+i))}function F(a){return["Top","Right","Bottom","Left"].map(function(b){return{width:k(a,"border"+b+"Width"),color:pa(a,"border"+b+"Color")}})}function G(a){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(b){return pa(a,"border"+b+"Radius")})}function H(a,b,c,d){var e=4*((Math.sqrt(2)-1)/3),f=c*e,g=d*e,h=a+c,i=b+d;return{topLeft:I({x:a,y:i},{x:a,y:i-g},{x:h-f,y:b},{x:h,y:b}),topRight:I({x:a,y:b},{x:a+f,y:b},{x:h,y:i-g},{x:h,y:i}),bottomRight:I({x:h,y:b},{x:h,y:b+g},{x:a+f,y:i},{x:a,y:i}),bottomLeft:I({x:h,y:i},{x:h-f,y:i},{x:a,y:b+g},{x:a,y:b})}}function I(a,b,c,d){var e=function(a,b,c){return{x:a.x+(b.x-a.x)*c,y:a.y+(b.y-a.y)*c}};return{start:a,startControl:b,endControl:c,end:d,subdivide:function(f){var g=e(a,b,f),h=e(b,c,f),i=e(c,d,f),j=e(g,h,f),k=e(h,i,f),l=e(j,k,f);return[I(a,g,j,l),I(l,k,i,d)]},curveTo:function(a){a.push(["bezierCurve",b.x,b.y,c.x,c.y,d.x,d.y])},curveToReversed:function(d){d.push(["bezierCurve",c.x,c.y,b.x,b.y,a.x,a.y])}}}function J(a,b,c,d,e,f,g){b[0]>0||b[1]>0?(a.push(["line",d[0].start.x,d[0].start.y]),d[0].curveTo(a),d[1].curveTo(a)):a.push(["line",f,g]),(c[0]>0||c[1]>0)&&a.push(["line",e[0].start.x,e[0].start.y])}function K(a,b,c,d,e,f,g){var h=[];return b[0]>0||b[1]>0?(h.push(["line",d[1].start.x,d[1].start.y]),d[1].curveTo(h)):h.push(["line",a.c1[0],a.c1[1]]),c[0]>0||c[1]>0?(h.push(["line",f[0].start.x,f[0].start.y]),f[0].curveTo(h),h.push(["line",g[0].end.x,g[0].end.y]),g[0].curveToReversed(h)):(h.push(["line",a.c2[0],a.c2[1]]),h.push(["line",a.c3[0],a.c3[1]])),b[0]>0||b[1]>0?(h.push(["line",e[1].end.x,e[1].end.y]),e[1].curveToReversed(h)):h.push(["line",a.c4[0],a.c4[1]]),h}function L(a,b,c){var d=a.left,e=a.top,f=a.width,g=a.height,h=b[0][0],i=b[0][1],j=b[1][0],k=b[1][1],l=b[2][0],m=b[2][1],n=b[3][0],o=b[3][1],p=Math.floor(g/2);h=h>p?p:h,i=i>p?p:i,j=j>p?p:j,k=k>p?p:k,l=l>p?p:l,m=m>p?p:m,n=n>p?p:n,o=o>p?p:o;var q=f-j,r=g-m,s=f-l,t=g-o;return{topLeftOuter:H(d,e,h,i).topLeft.subdivide(.5),topLeftInner:H(d+c[3].width,e+c[0].width,Math.max(0,h-c[3].width),Math.max(0,i-c[0].width)).topLeft.subdivide(.5),topRightOuter:H(d+q,e,j,k).topRight.subdivide(.5),topRightInner:H(d+Math.min(q,f+c[3].width),e+c[0].width,q>f+c[3].width?0:j-c[3].width,k-c[0].width).topRight.subdivide(.5),bottomRightOuter:H(d+s,e+r,l,m).bottomRight.subdivide(.5),bottomRightInner:H(d+Math.min(s,f+c[3].width),e+Math.min(r,g+c[0].width),Math.max(0,l-c[1].width),Math.max(0,m-c[2].width)).bottomRight.subdivide(.5),bottomLeftOuter:H(d,e+t,n,o).bottomLeft.subdivide(.5),bottomLeftInner:H(d+c[3].width,e+t,Math.max(0,n-c[3].width),Math.max(0,o-c[2].width)).bottomLeft.subdivide(.5)}}function M(a,b,c,d,e){var f=pa(a,"backgroundClip"),g=[];switch(f){case"content-box":case"padding-box":J(g,d[0],d[1],b.topLeftInner,b.topRightInner,e.left+c[3].width,e.top+c[0].width),J(g,d[1],d[2],b.topRightInner,b.bottomRightInner,e.left+e.width-c[1].width,e.top+c[0].width),J(g,d[2],d[3],b.bottomRightInner,b.bottomLeftInner,e.left+e.width-c[1].width,e.top+e.height-c[2].width),J(g,d[3],d[0],b.bottomLeftInner,b.topLeftInner,e.left+c[3].width,e.top+e.height-c[2].width);break;default:J(g,d[0],d[1],b.topLeftOuter,b.topRightOuter,e.left,e.top),J(g,d[1],d[2],b.topRightOuter,b.bottomRightOuter,e.left+e.width,e.top),J(g,d[2],d[3],b.bottomRightOuter,b.bottomLeftOuter,e.left+e.width,e.top+e.height),J(g,d[3],d[0],b.bottomLeftOuter,b.topLeftOuter,e.left,e.top+e.height)}return g}function N(a,b,c){var d,e,f,g,h,i,j=b.left,k=b.top,l=b.width,m=b.height,n=G(a),o=L(b,n,c),p={clip:M(a,o,c,n,b),borders:[]};for(d=0;d<4;d++)if(c[d].width>0){switch(e=j,f=k,g=l,h=m-c[2].width,d){case 0:h=c[0].width,i=K({c1:[e,f],c2:[e+g,f],c3:[e+g-c[1].width,f+h],c4:[e+c[3].width,f+h]},n[0],n[1],o.topLeftOuter,o.topLeftInner,o.topRightOuter,o.topRightInner);break;case 1:e=j+l-c[1].width,g=c[1].width,i=K({c1:[e+g,f],c2:[e+g,f+h+c[2].width],c3:[e,f+h],c4:[e,f+c[0].width]},n[1],n[2],o.topRightOuter,o.topRightInner,o.bottomRightOuter,o.bottomRightInner);break;case 2:f=f+m-c[2].width,h=c[2].width,i=K({c1:[e+g,f+h],c2:[e,f+h],c3:[e+c[3].width,f],c4:[e+g-c[3].width,f]},n[2],n[3],o.bottomRightOuter,o.bottomRightInner,o.bottomLeftOuter,o.bottomLeftInner);break;case 3:g=c[3].width,i=K({c1:[e,f+h+c[2].width],c2:[e,f],c3:[e+g,f+c[0].width],c4:[e+g,f+h]},n[3],n[0],o.bottomLeftOuter,o.bottomLeftInner,o.topLeftOuter,o.topLeftInner)}p.borders.push({args:i,color:c[d].color})}return p}function O(a,b){var c=a.drawShape();return b.forEach(function(a,b){c[0===b?"moveTo":a[0]+"To"].apply(null,a.slice(1))}),c}function P(a,b,c){"transparent"!==c&&(a.setVariable("fillStyle",c),O(a,b),a.fill(),ja+=1)}function Q(a,b,c){var d,e,f=ka.createElement("valuewrap"),g=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"];g.forEach(function(b){try{f.style[b]=pa(a,b)}catch(a){la.log("html2canvas: Parse: Exception caught in renderFormValue: "+a.message)}}),f.style.borderColor="black",f.style.borderStyle="solid",f.style.display="block",f.style.position="absolute",(/^(submit|reset|button|text|password)$/.test(a.type)||"SELECT"===a.nodeName)&&(f.style.lineHeight=pa(a,"height")),f.style.top=b.top+"px",f.style.left=b.left+"px",d="SELECT"===a.nodeName?(a.options[a.selectedIndex]||0).text:a.value,d||(d=a.placeholder),e=ka.createTextNode(d),f.appendChild(e),oa.appendChild(f),v(a,e,c),oa.removeChild(f)}function R(a){a.drawImage.apply(a,Array.prototype.slice.call(arguments,1)),ja+=1}function S(a,b){var c=window.getComputedStyle(a,b),d=window.getComputedStyle(a);if(c&&c.content&&"none"!==c.content&&"-moz-alt-content"!==c.content&&"none"!==c.display&&d.content!==c.content){var e=c.content+"";"'"!==e[0]&&'"'!==e[0]||(e=e.replace(/(^['"])|(['"]$)/g,""));var f="url"===e.substr(0,3),g=document.createElement(f?"img":"span");return g.className=qa+"-element ",Object.keys(c).filter(T).forEach(function(a){try{g.style[a]=c[a]}catch(b){la.log(["Tried to assign readonly property ",a,"Error:",b])}}),f?g.src=la.parseBackgroundImage(e)[0].args[0]:g.innerHTML=e,g}}function T(a){return isNaN(window.parseInt(a,10))}function U(a,b,c,d){var e=Math.round(d.left+c.left),f=Math.round(d.top+c.top);a.createPattern(b),a.translate(e,f),a.fill(),a.translate(-e,-f)}function V(a,b,c,d,e,f,g,h){var i=[];i.push(["line",Math.round(e),Math.round(f)]),i.push(["line",Math.round(e+g),Math.round(f)]),i.push(["line",Math.round(e+g),Math.round(h+f)]),i.push(["line",Math.round(e),Math.round(h+f)]),O(a,i),a.save(),a.clip(),U(a,b,c,d),a.restore()}function W(a,b,c){l(a,b.left,b.top,b.width,b.height,c)}function X(a,b,c,d,e){var f=la.BackgroundSize(a,b,d,e),g=la.BackgroundPosition(a,b,d,e,f),h=la.BackgroundRepeat(a,e);switch(d=Z(d,f),h){case"repeat-x":case"repeat no-repeat":V(c,d,g,b,b.left,b.top+g.top,99999,d.height);break;case"repeat-y":case"no-repeat repeat":V(c,d,g,b,b.left+g.left,b.top,d.width,99999);break;case"no-repeat":V(c,d,g,b,b.left+g.left,b.top+g.top,d.width,d.height);break;default:U(c,d,g,{top:b.top,left:b.left,width:d.width,height:d.height})}}function Y(a,b,c){for(var d,e=pa(a,"backgroundImage"),f=la.parseBackgroundImage(e),g=f.length;g--;)if(e=f[g],e.args&&0!==e.args.length){var h="url"===e.method?e.args[0]:e.value;d=A(h),d?X(a,b,c,d,g):la.log("html2canvas: Error loading background:",e)}}function Z(a,b){if(a.width===b.width&&a.height===b.height)return a;var c,d=ka.createElement("canvas");return d.width=b.width,d.height=b.height,c=d.getContext("2d"),R(c,a,0,0,a.width,a.height,0,0,b.width,b.height),d}function $(a,b,c){return a.setVariable("globalAlpha",pa(b,"opacity")*(c?c.opacity:1))}function _(a){return a.replace("px","")}function aa(a,b){var c=/(matrix)\((.+)\)/,d=pa(a,"transform")||pa(a,"-webkit-transform")||pa(a,"-moz-transform")||pa(a,"-ms-transform")||pa(a,"-o-transform"),e=pa(a,"transform-origin")||pa(a,"-webkit-transform-origin")||pa(a,"-moz-transform-origin")||pa(a,"-ms-transform-origin")||pa(a,"-o-transform-origin")||"0px 0px";e=e.split(" ").map(_).map(la.asFloat);var f;if(d&&"none"!==d){var g=d.match(c);if(g)switch(g[1]){case"matrix":f=g[2].split(",").map(la.trimText).map(la.asFloat)}}var h=k(a,"marginLeft"),i=k(a,"marginTop");return f&&(f[f.length-2]+=h,f[f.length-1]+=i),{origin:e,matrix:f}}function ba(a,c,d,e){var f=h2cRenderContext(c?d.width:i(),c?d.height:j()),g={ctx:f,opacity:$(f,a,c),cssPosition:pa(a,"position"),borders:F(a),transform:e,clip:c&&c.clip?la.Extend({},c.clip):null};return C(a,g,c),b.useOverflow===!0&&/(hidden|scroll|auto)/.test(pa(a,"overflow"))===!0&&/(BODY)/i.test(a.nodeName)===!1&&(g.clip=g.clip?B(g.clip,d):d),g}function ca(a,b,c){var d={left:b.left+a[3].width,top:b.top+a[0].width,width:b.width-(a[1].width+a[3].width),height:b.height-(a[0].width+a[2].width)};return c&&(d=B(d,c)),d}function da(a,b){var c=b.matrix?la.OffsetBounds(a):la.Bounds(a);return b.origin[0]+=c.left,b.origin[1]+=c.top,c}function ea(a,c,d){var e,f,g=aa(a,c),h=da(a,g),i=ba(a,c,h,g),j=i.borders,k=i.ctx,l=ca(j,h,i.clip),m=N(a,h,j);if(na.test(a.nodeName)||a.hasAttribute(b.ignoreByAttributes))return void(f="#efefef");switch(f=pa(a,"backgroundColor"),O(k,m.clip),k.save(),k.clip(),l.height>0&&l.width>0&&!d?(W(k,h,f),Y(a,l,k)):d&&(i.backgroundColor=f),k.restore(),m.borders.forEach(function(a){P(k,a.args,a.color)}),a.nodeName){case"IMG":(e=A(a.getAttribute("src")))?E(k,a,e,h,j):la.log("html2canvas: Error loading <img>:"+a.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(a.type)&&(a.value||a.placeholder||"").length>0&&Q(a,h,i);break;case"TEXTAREA":(a.value||a.placeholder||"").length>0&&Q(a,h,i);break;case"SELECT":(a.options||a.placeholder||"").length>0&&Q(a,h,i);break;case"LI":z(a,i,l);break;case"CANVAS":E(k,a,a,h,j)}return i}function fa(a){return"none"!==pa(a,"display")&&"hidden"!==pa(a,"visibility")&&!a.hasAttribute("data-html2canvas-ignore")}function ga(a,c,d){return d||(d=function(){}),!fa(a)||(c=ea(a,c,!1)||c,na.test(a.nodeName)||a.hasAttribute(b.ignoreByAttributes))?void d():ha(a,c,d)}function ha(a,c,d){function e(b){b.nodeType===b.ELEMENT_NODE?ga(b,c,f):b.nodeType===b.TEXT_NODE?(v(a,b,c),f()):f()}function f(a){--h<=0&&(la.log("finished rendering "+g.length+" children."),d())}var g=la.Children(a),h=g.length+1;f(),b.async?g.forEach(function(a){setTimeout(function(){e(a)},0)}):g.forEach(e)}window.scroll(0,0);var ia=void 0===b.elements?document.body:b.elements[0],ja=0,ka=ia.ownerDocument,la=_html2canvas.Util,ma=la.Support(b,ka),na=new RegExp("("+b.ignoreElements+")"),oa=ka.body,pa=la.getCSS,qa="___html2canvas___pseudoelement",ra=ka.createElement("style");ra.innerHTML="."+qa+'-parent:before { content: "" !important; display: none !important; }.'+qa+'-parent:after { content: "" !important; display: none !important; }',oa.appendChild(ra),a=a||{},d()},_html2canvas.Preload=function(a){function b(a){w.href=a,w.href=w.href;var b=w.protocol+w.host;return b===l}function c(){q.log("html2canvas: start: images: "+p.numLoaded+" / "+p.numTotal+" (failed: "+p.numFailed+")"),!p.firstRun&&p.numLoaded>=p.numTotal&&(q.log("Finished loading images: # "+p.numTotal+" (failed: "+p.numFailed+")"),"function"==typeof a.complete&&a.complete(p))}function d(b,d,e){var f,g,h=a.proxy;w.href=b,b=w.href,f="html2canvas_"+r++,e.callbackname=f,h+=h.indexOf("?")>-1?"&":"?",h+="url="+encodeURIComponent(b)+"&callback="+f,g=t.createElement("script"),window[f]=function(a){"error:"===a.substring(0,6)?(e.succeeded=!1,p.numLoaded++,p.numFailed++,c()):(k(d,e),d.src=a),window[f]=void 0;try{delete window[f]}catch(a){}g.parentNode.removeChild(g),g=null,delete e.script,delete e.callbackname},g.setAttribute("type","text/javascript"),g.setAttribute("src",h),e.script=g,window.document.body.appendChild(g)}function e(a,b){var c=window.getComputedStyle(a,b),d=c.content;"url"===d.substr(0,3)&&m.loadImage(_html2canvas.Util.parseBackgroundImage(d)[0].args[0]),i(c.backgroundImage,a)}function f(a){e(a,":before"),e(a,":after")}function g(a,b){var d=_html2canvas.Generate.Gradient(a,b);void 0!==d&&(p[a]={img:d,succeeded:!0},p.numTotal++,p.numLoaded++,c())}function h(a){return a&&a.method&&a.args&&a.args.length>0}function i(a,b){var c;_html2canvas.Util.parseBackgroundImage(a).filter(h).forEach(function(a){"url"===a.method?m.loadImage(a.args[0]):a.method.match(/\-?gradient$/)&&(void 0===c&&(c=_html2canvas.Util.Bounds(b)),g(a.value,c))})}function j(a){var b=!1;try{q.Children(a).forEach(j)}catch(a){}try{b=a.nodeType}catch(a){
b=!1,q.log("html2canvas: failed to access some element's nodeType - Exception: "+a.message)}if(1===b||void 0===b){f(a);try{i(q.getCSS(a,"backgroundImage"),a)}catch(a){q.log("html2canvas: failed to get background-image - Exception: "+a.message)}i(a)}}function k(b,e){b.onload=function(){void 0!==e.timer&&window.clearTimeout(e.timer),p.numLoaded++,e.succeeded=!0,b.onerror=b.onload=null,c()},b.onerror=function(){if("anonymous"===b.crossOrigin&&(window.clearTimeout(e.timer),a.proxy)){var f=b.src;return b=new Image,e.img=b,b.src=f,void d(b.src,b,e)}p.numLoaded++,p.numFailed++,e.succeeded=!1,b.onerror=b.onload=null,c()}}var l,m,n,o,p={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},q=_html2canvas.Util,r=0,s=a.elements[0]||document.body,t=s.ownerDocument,u=s.getElementsByTagName("img"),v=u.length,w=t.createElement("a"),x=function(a){return void 0!==a.crossOrigin}(new Image);for(w.href=window.location.href,l=w.protocol+w.host,m={loadImage:function(c){var e,f;c&&void 0===p[c]&&(e=new Image,c.match(/data:image\/.*;base64,/i)?(e.src=c.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),f=p[c]={img:e},p.numTotal++,k(e,f)):b(c)||a.allowTaint===!0?(f=p[c]={img:e},p.numTotal++,k(e,f),e.src=c):x&&!a.allowTaint&&a.useCORS?(e.crossOrigin="anonymous",f=p[c]={img:e},p.numTotal++,k(e,f),e.src=c):a.proxy&&(f=p[c]={img:e},p.numTotal++,d(c,e,f)))},cleanupDOM:function(b){var d,e;if(!p.cleanupDone){b&&"string"==typeof b?q.log("html2canvas: Cleanup because: "+b):q.log("html2canvas: Cleanup after timeout: "+a.timeout+" ms.");for(e in p)if(p.hasOwnProperty(e)&&(d=p[e],"object"==typeof d&&d.callbackname&&void 0===d.succeeded)){window[d.callbackname]=void 0;try{delete window[d.callbackname]}catch(a){}d.script&&d.script.parentNode&&(d.script.setAttribute("src","about:blank"),d.script.parentNode.removeChild(d.script)),p.numLoaded++,p.numFailed++,q.log("html2canvas: Cleaned up failed img: '"+e+"' Steps: "+p.numLoaded+" / "+p.numTotal)}void 0!==window.stop?window.stop():void 0!==document.execCommand&&document.execCommand("Stop",!1),void 0!==document.close&&document.close(),p.cleanupDone=!0,b&&"string"==typeof b||c()}},renderingDone:function(){o&&window.clearTimeout(o)}},a.timeout>0&&(o=window.setTimeout(m.cleanupDOM,a.timeout)),q.log("html2canvas: Preload starts: finding background-images"),p.firstRun=!0,j(s),q.log("html2canvas: Preload: Finding images"),n=0;n<v;n+=1)m.loadImage(u[n].getAttribute("src"));return p.firstRun=!1,q.log("html2canvas: Preload: Done."),p.numTotal===p.numLoaded&&c(),m},_html2canvas.Renderer=function(a,b){function c(a,b){return"children"===a?-1:"children"===b?1:a-b}function d(a){function b(a){Object.keys(a).sort(c).forEach(function(c){var d=[],f=[],g=[],h=[];a[c].forEach(function(a){a.node.zIndex.isPositioned||a.node.zIndex.opacity<1?g.push(a):a.node.zIndex.isFloated?f.push(a):d.push(a)}),function a(b){b.forEach(function(b){h.push(b),b.children&&a(b.children)})}(d.concat(f,g)),h.forEach(function(a){a.context?b(a.context):e.push(a.node)})})}var d,e=[];return d=function(a){function b(a,c,d){var e="auto"===c.zIndex.zindex?0:Number(c.zIndex.zindex),f=a,g=c.zIndex.isPositioned,h=c.zIndex.isFloated,i={node:c},j=d;c.zIndex.ownStacking?(f=i.context={children:[{node:c,children:[]}]},j=void 0):(g||h)&&(j=i.children=[]),0===e&&d?d.push(i):(a[e]||(a[e]=[]),a[e].push(i)),c.zIndex.children.forEach(function(a){b(f,a,j)})}var c={};return b(c,a),c}(a),b(d),e}function e(a){var c;if("string"==typeof b.renderer&&void 0!==_html2canvas.Renderer[a])c=_html2canvas.Renderer[a](b);else{if("function"!=typeof a)throw new Error("Unknown renderer");c=a(b)}if("function"!=typeof c)throw new Error("Invalid renderer defined");return c}return e(b.renderer)(a,b,document,d(a.stack),_html2canvas)},_html2canvas.Util.Support=function(a,b){function c(){var a=new Image,c=b.createElement("canvas"),d=void 0!==c.getContext&&c.getContext("2d");if(d===!1)return!1;c.width=c.height=10,a.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{d.drawImage(a,0,0),c.toDataURL()}catch(a){return!1}return _html2canvas.Util.log("html2canvas: Parse: SVG powered rendering available"),!0}function d(){var a,c,d,e,f=!1;return b.createRange&&(a=b.createRange(),a.getBoundingClientRect&&(c=b.createElement("boundtest"),c.style.height="123px",c.style.display="block",b.body.appendChild(c),a.selectNode(c),d=a.getBoundingClientRect(),e=d.height,123===e&&(f=!0),b.body.removeChild(c))),f}return{rangeBounds:d(),svgRendering:a.svgRendering&&c()}},window.html2canvas=function(a,b){a=a.length?a:[a];var c,d={logging:!1,elements:a,background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",ignoreByAttributes:"ignore",useOverflow:!0,letterRendering:!1,chinese:!1,async:!1,width:null,height:null,taintTest:!0,renderer:"Canvas"};return d=_html2canvas.Util.Extend(b,d),_html2canvas.logging=d.logging,d.complete=function(a){"function"==typeof d.onpreloaded&&d.onpreloaded(a)===!1||_html2canvas.Parse(a,d,function(a){"function"==typeof d.onparsed&&d.onparsed(a)===!1||(c=_html2canvas.Renderer(a,d),"function"==typeof d.onrendered&&d.onrendered(c))})},window.setTimeout(function(){_html2canvas.Preload(d)},0),{render:function(a,b){return _html2canvas.Renderer(a,_html2canvas.Util.Extend(b,d))},parse:function(a,b){return _html2canvas.Parse(a,_html2canvas.Util.Extend(b,d))},preload:function(a){return _html2canvas.Preload(_html2canvas.Util.Extend(a,d))},log:_html2canvas.Util.log}},window.html2canvas.log=_html2canvas.Util.log,window.html2canvas.Renderer={Canvas:void 0},window.html2canvas.downloadCanvas=function(a,b){var c=a.toDataURL("image/png");if(window.ActiveXObject||"ActiveXObject"in window){var d=function(a){for(var b=atob(a.split(",")[1]),c=[],d=0;d<b.length;d++)c.push(b.charCodeAt(d));return new Blob([new Uint8Array(c)],{type:"image/png"})},e=d(c);window.navigator.msSaveOrOpenBlob(e,b||"screenshot.png")}else{var f=document.createElementNS("http://www.w3.org/1999/xhtml","a");f.href=c,f.download=b||"screenshot.png";var g=document.createEvent("MouseEvents");g.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),f.dispatchEvent(g)}},window.html2canvas.download=function(a,b){function c(a){var b=a.childNodes;if(a.style&&a.style.transform){e[f++]={transform:a.style.transform,left:a.style.left,top:a.style.top};var d=a.style.transform.substr(10).match(/\-?[0-9]+/g);a.style.transform="translate3d(0px, 0px, 0px)",a.style.left=parseInt(d[0])+"px",a.style.top=parseInt(d[1])+"px"}if(b&&b.length>0)for(var g,h=0;h<b.length;h++)g=b[h],c(g)}function d(a){var b=a.childNodes;if(e&&e.length>0&&a.style&&a.style.transform){var c=e[f++];a.style.transform=c.transform,a.style.left=c.left?c.left:"auto",a.style.top=c.top?c.top:"auto"}if(b&&b.length>0)for(var g,h=0;h<b.length;h++)g=b[h],d(g)}a&&"string"==typeof a?a=document.getElementById(a):a||(a=document.body);var e=[],f=0;c(a),window.html2canvas(a,{onrendered:function(a){window.html2canvas.downloadCanvas(a,b),f=0,d(document.body)},useCORS:!0})},window.html2canvas.getCanvas=function(a,b){function c(a){var b=a.childNodes;if(a.style&&a.style.transform){e[f++]={transform:a.style.transform,left:a.style.left,top:a.style.top};var d=a.style.transform.substr(10).match(/\-?[0-9]+/g);a.style.transform="translate3d(0px, 0px, 0px)",a.style.left=parseInt(d[0])+"px",a.style.top=parseInt(d[1])+"px"}if(b&&b.length>0)for(var g,h=0;h<b.length;h++)g=b[h],c(g)}function d(a){var b=a.childNodes;if(e&&e.length>0&&a.style&&a.style.transform){var c=e[f++];a.style.transform=c.transform,a.style.left=c.left?c.left:"auto",a.style.top=c.top?c.top:"auto"}if(b&&b.length>0)for(var g,h=0;h<b.length;h++)g=b[h],d(g)}a&&"string"==typeof a?a=document.getElementById(a):a||(a=document.body);var e=[],f=0;c(a),window.html2canvas(a,{onrendered:function(a){b(a),f=0,d(document.body)},useCORS:!0})},_html2canvas.Renderer.Canvas=function(a){function b(a,b){a.beginPath(),b.forEach(function(b){a[b.name].apply(a,b.arguments)}),a.closePath()}function c(a){if(f.indexOf(a.arguments[0].src)===-1){h.drawImage(a.arguments[0],0,0);try{h.getImageData(0,0,1,1)}catch(a){return g=e.createElement("canvas"),h=g.getContext("2d"),!1}f.push(a.arguments[0].src)}return!0}function d(d,e){switch(e.type){case"variable":d[e.name]=e.arguments;break;case"function":switch(e.name){case"createPattern":if(e.arguments[0].width>0&&e.arguments[0].height>0)try{d.fillStyle=d.createPattern(e.arguments[0],"repeat")}catch(a){i.log("html2canvas: Renderer: Error creating pattern",a.message)}break;case"drawShape":b(d,e.arguments);break;case"drawImage":e.arguments[8]>0&&e.arguments[7]>0&&(!a.taintTest||a.taintTest&&c(e))&&d.drawImage.apply(d,e.arguments);break;default:d[e.name].apply(d,e.arguments)}}}a=a||{};var e=document,f=[],g=document.createElement("canvas"),h=g.getContext("2d"),i=_html2canvas.Util,j=a.canvas||e.createElement("canvas");return function(a,b,c,e,f){var g,h,k,l=j.getContext("2d"),m=a.stack;if(j.width=j.style.width=b.width||m.ctx.width,j.height=j.style.height=b.height||m.ctx.height,k=l.fillStyle,l.fillStyle=i.isTransparent(a.backgroundColor)&&void 0!==b.background?b.background:a.backgroundColor,l.fillRect(0,0,j.width,j.height),l.fillStyle=k,e.forEach(function(a){l.textBaseline="bottom",l.save(),a.transform.matrix&&(l.translate(a.transform.origin[0],a.transform.origin[1]),l.transform.apply(l,a.transform.matrix),l.translate(-a.transform.origin[0],-a.transform.origin[1])),a.clip&&(l.beginPath(),l.rect(a.clip.left,a.clip.top,a.clip.width,a.clip.height),l.clip()),a.ctx.storage&&a.ctx.storage.forEach(function(a){d(l,a)}),l.restore()}),i.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),1===b.elements.length&&"object"==typeof b.elements[0]&&"BODY"!==b.elements[0].nodeName){h=f.Util.Bounds(b.elements[0]),g=c.createElement("canvas"),g.width=Math.ceil(h.width),g.height=Math.ceil(h.height),l=g.getContext("2d");var n=j.getContext("2d").getImageData(h.left,h.top,h.width,h.height);return l.putImageData(n,0,0),j=null,g}return j}};