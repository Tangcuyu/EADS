/*!
 * 
 *  Wed Jun 12 2019 10:15:29 GMT+0800 (中国标准时间)
 *  版本：3.1.0
 * 
 */!function(e){var t={};function r(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(a,i,function(t){return e[t]}.bind(null,i));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t){e.exports=axios},function(e,t){e.exports=axiosJsonpAdapter},function(e,t,r){"use strict";r.r(t);var a=r(0),i=r.n(a),n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s={checkParam:function(e,t,r,a,s,o){if(a){var d=Object.keys(a);if(!r||"object"!=(void 0===r?"undefined":n(r)))return Promise.reject("参数opts有误");for(var l=0;l<d.length;l++)if("Array"==a[d[l]].dataType){if(!(r[d[l]]&&r[d[l]]instanceof Array))return Promise.reject("参数"+d[l]+"有误");r[d[l]]=JSON.stringify(r[d[l]])}else if("Object"==a[d[l]].dataType){if(!(r[d[l]]&&r[d[l]]instanceof Object))return Promise.reject("参数"+d[l]+"有误");r[d[l]]=JSON.stringify(r[d[l]])}else if(!r[d[l]]||n(r[d[l]])!=a[d[l]].dataType)return Promise.reject("必填参数"+d[l]+"有误")}if(r&&"object"==(void 0===r?"undefined":n(r)))for(var c=Object.keys(r),p=0;p<c.length;p++)if(s&&s[c[p]])if("Array"==s[c[p]].dataType){if(!(r[c[p]]instanceof Array))return Promise.reject("参数"+c[p]+"有误");r[c[p]]=JSON.stringify(r[c[p]])}else if("Object"==s[c[p]].dataType){if(!(r[c[p]]instanceof Object))return Promise.reject("参数"+c[p]+"有误");r[c[p]]=JSON.stringify(r[c[p]])}else if(n(r[c[p]])!=s[c[p]].dataType)return Promise.reject("参数"+c[p]+"有误");var u=i.a.CancelToken.source(),y=this.request({url:e,params:r,method:o||"get",cancelToken:u.token});return y.cancel=u.cancel,y},downFile:function(e,t,r,a,i,s){if(a){var o=Object.keys(a);if(!r||"object"!=(void 0===r?"undefined":n(r)))return Promise.reject("参数opts有误");for(var d=0;d<o.length;d++)if("Array"==a[o[d]].dataType){if(!(r[o[d]]&&r[o[d]]instanceof Array))return Promise.reject("参数"+o[d]+"有误");r[o[d]]=JSON.stringify(r[o[d]])}else if("Object"==a[o[d]].dataType){if(!(r[o[d]]&&r[o[d]]instanceof Object))return Promise.reject("参数"+o[d]+"有误");r[o[d]]=JSON.stringify(r[o[d]])}else if(!r[o[d]]||n(r[o[d]])!=a[o[d]].dataType)return Promise.reject("必填参数"+o[d]+"有误")}var l=Object.keys(r);if(r&&"object"==(void 0===r?"undefined":n(r)))for(var c=0;c<l.length;c++)if(i&&i[l[c]])if("Array"==i[l[c]].dataType){if(!(r[l[c]]instanceof Array))return Promise.reject("参数"+l[c]+"有误");r[l[c]]=JSON.stringify(r[l[c]])}else if("Object"==i[l[c]].dataType){if(!(r[l[c]]instanceof Object))return Promise.reject("参数"+l[c]+"有误");r[l[c]]=JSON.stringify(r[l[c]])}else if(n(r[l[c]])!=i[l[c]].dataType)return Promise.reject("参数"+l[c]+"有误");var p="";l.forEach(function(e,t){p=r[e]instanceof Object?p+e+"="+JSON.stringify(r[e])+"&":p+e+"="+r[e]+"&"});var u=e+"?"+p;window.open(encodeURI(u))},uploadFile:function(e,t,r,a,s,o){if(s){var d=Object.keys(s);if(!a||"object"!=(void 0===a?"undefined":n(a)))return Promise.reject("参数opts有误");for(var l=0;l<d.length;l++)if("Array"==s[d[l]].dataType){if(!(a[d[l]]&&a[d[l]]instanceof Array))return Promise.reject("参数"+d[l]+"有误");a[d[l]]=JSON.stringify(a[d[l]])}else if("Object"==s[d[l]].dataType){if(!(a[d[l]]&&a[d[l]]instanceof Object))return Promise.reject("参数"+d[l]+"有误");a[d[l]]=JSON.stringify(a[d[l]])}else if(!a[d[l]]||n(a[d[l]])!=s[d[l]].dataType)return Promise.reject("必填参数"+d[l]+"有误")}var c=Object.keys(a);if(a&&"object"==(void 0===a?"undefined":n(a)))for(var p=0;p<c.length;p++)if(o&&o[c[p]])if("Array"==o[c[p]].dataType){if(!(a[c[p]]instanceof Array))return Promise.reject("参数"+c[p]+"有误");a[c[p]]=JSON.stringify(a[c[p]])}else if("Object"==o[c[p]].dataType){if(!(a[c[p]]instanceof Object))return Promise.reject("参数"+c[p]+"有误");a[c[p]]=JSON.stringify(a[c[p]])}else if(n(a[c[p]])!=o[c[p]].dataType)return Promise.reject("参数"+c[p]+"有误");var u=new FormData;u.append("file",r);var y=i.a.CancelToken.source(),f=this.request({url:e,data:u,params:a,method:"post",headers:{"Content-Type":"multipart/form-data"}});return f.cancel=y.cancel,f},returnResult:function(e,t,r){var a=i.a.CancelToken.source(),n=null;return(n=this.request({url:e,params:r||null,method:t||"get",cancelToken:a.token})).cancel=a.cancel,n}},o=s;var d=o.checkParam,l=o.returnResult,c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.request=t}return e.prototype.base=function(e,t){if("string"!=typeof e||!e.trim())return Promise.reject("参数table有误");var r="/statistics/base/"+e;return d.call(this,r,e,t,{field:{isNeed:!0,dataType:"string"}},{where:{isNeed:!1,dataType:"string"},inputGeometry:{isNeed:!1,dataType:"Object"},inputSrid:{isNeed:!1,dataType:"string"},spatialRel:{isNeed:!1,dataType:"string"},maxDistance:{isNeed:!1,dataType:"string"}})},e.prototype.district=function(e,t){if("string"!=typeof e||!e.trim())return Promise.reject("参数table有误");var r="/statistics/district/"+e;return d.call(this,r,e,t,{districtField:{isNeed:!0,dataType:"string"},districtCode:{isNeed:!0,dataType:"string"}},{typeField:{isNeed:!1,dataType:"string"},where:{isNeed:!1,dataType:"string"},sort:{isNeed:!1,dataType:"string"}})},e.prototype.districtMulti=function(e){if(!(e instanceof Array))return Promise.reject("参数应为数组 ");return l.call(this,"/statistics/districtMulti","get",{data:JSON.stringify(e)})},e.prototype.districtCache=function(e,t){if("string"!=typeof e||!e.trim())return Promise.reject("参数id有误");var r="/statistics/cache/district/"+e;return d.call(this,r,e,t,null,{where:{isNeed:!1,dataType:"string"},geometry:{isNeed:!1,dataType:"Object"}})},e.prototype.districtCacheMulti=function(e){if(!(e instanceof Array))return Promise.reject("参数应为数组 ");return l.call(this,"/statistics/cache/district","get",{data:JSON.stringify(e)})},e.prototype.treeCache=function(e){if("string"!=typeof e||!e.trim())return Promise.reject("参数treeId有误");var t="/statistics/cache/tree/"+e;return l.call(this,t,"get")},e.prototype.grid=function(e,t){if("string"!=typeof e||!e.trim())return Promise.reject("参数table有误");var r="/statistics/grid/"+e;return d.call(this,r,e,t,{field:{isNeed:!0,dataType:"string"},geometry:{isNeed:!0,dataType:"Object"},gridSize:{isNeed:!0,dataType:"number"}},{origin:{isNeed:!1,dataType:"string"}})},e}();var p=o.checkParam,u=o.returnResult,y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.request=t}return e.prototype.getTree=function(e){if("string"!=typeof e||!e.trim())return Promise.reject("参数id有误");var t="/catalog/tree/"+e;return u.call(this,t)},e.prototype.deleteTree=function(e){if("string"!=typeof e||!e.trim())return Promise.reject("参数id有误");var t="/catalog/tree/"+e;return u.call(this,t,"delete")},e.prototype.updatedTree=function(e,t){if("string"!=typeof e||!e.trim())return Promise.reject("参数id有误");var r="/catalog/tree/"+e;return p.call(this,r,e,t,null,{name:{isNeed:!1,dataType:"string"},type:{isNeed:!1,dataType:"string"}},"put")},e.prototype.getTreeList=function(e){return p.call(this,"/catalog/tree",null,e,null,{name:{isNeed:!1,dataType:"string"},type:{isNeed:!1,dataType:"string"}})},e.prototype.createdTree=function(e){return p.call(this,"/catalog/tree",null,e,{type:{isNeed:!0,dataType:"string"},name:{isNeed:!1,dataType:"string"}},{id:{isNeed:!1,dataType:"string"},nodes:{isNeed:!1,dataType:"Array"}},"post")},e.prototype.createdNode=function(e){return p.call(this,"/catalog/node",null,e,{name:{isNeed:!0,dataType:"string"},treeId:{isNeed:!0,dataType:"string"},parentId:{isNeed:!0,dataType:"string"}},{id:{isNeed:!1,dataType:"string"},isLeaf:{isNeed:!1,dataType:"boolean"},description:{isNeed:!1,dataType:"string"},iconName:{isNeed:!1,dataType:"string"},orderNum:{isNeed:!1,dataType:"number"},ext:{isNeed:!1,dataType:"Object"}},"post")},e.prototype.createdNodesBatch=function(e,t,r){if(!(e instanceof Array))return Promise.reject("参数应为数组 ");var a=r?{nodes:JSON.stringify(e),treeId:t,emptyNodes:r}:{nodes:JSON.stringify(e),treeId:t};return p.call(this,"/catalog/nodes",null,a,{nodes:{isNeed:!0,dataType:"string"},treeId:{isNeed:!0,dataType:"string"}},{emptyNodes:{isNeed:!1,dataType:"boolean"}},"post")},e.prototype.updatedNodesBatch=function(e){if(!(e instanceof Array))return Promise.reject("参数应为数组 ");var t={nodes:JSON.stringify(e)};return p.call(this,"/catalog/nodes",null,t,{nodes:{isNeed:!0,dataType:"string"}},null,"put")},e.prototype.deleteNode=function(e,t){if("string"!=typeof e||!e.trim())return Promise.reject("参数id有误");var r="/catalog/node/"+e;return p.call(this,r,e,t,null,{cascade:{isNeed:!1,dataType:"boolean"}},"delete")},e.prototype.getNode=function(e,t){if("string"!=typeof e||!e.trim())return Promise.reject("参数id有误");var r="/catalog/node/"+e;return p.call(this,r,e,t,null,{childrenReturn:{isNeed:!1,dataType:"string"}})},e.prototype.updateNodeById=function(e,t){if("string"!=typeof e||!e.trim())return Promise.reject("参数id有误");var r="/catalog/node/"+e;return p.call(this,r,null,t,null,{name:{isNeed:!1,dataType:"string"},treeId:{isNeed:!1,dataType:"string"},isLeaf:{isNeed:!1,dataType:"boolean"},parentId:{isNeed:!1,dataType:"string"},description:{isNeed:!1,dataType:"string"},iconName:{isNeed:!1,dataType:"string"},orderNum:{isNeed:!1,dataType:"number"},ext:{isNeed:!1,dataType:"Object"}},"put")},e}();var f=o.checkParam,g=o.returnResult,m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.request=t}return e.prototype.queryPage=function(e,t){if("string"!=typeof e||!e.trim())return e=encodeURI(e),Promise.reject("参数table有误");var r="/query/page/"+e;return f.call(this,r,e,t,null,{select:{isNeed:!1,dataType:"string"},where:{isNeed:!1,dataType:"string"},inputGeometry:{isNeed:!1,dataType:"Object"},inputSrid:{isNeed:!1,dataType:"string"},spatialRel:{isNeed:!1,dataType:"string"},maxDistance:{isNeed:!1,dataType:"string"},relation:{isNeed:!1,dataType:"Array"},sort:{isNeed:!1,dataType:"string"},pageSize:{isNeed:!1,dataType:"number"},pageIndex:{isNeed:!1,dataType:"number"}})},e.prototype.query=function(e,t){if("string"!=typeof e||!e.trim())return Promise.reject("参数table有误");var r="/query/query/"+e;return f.call(this,r,e,t,null,{select:{isNeed:!1,dataType:"string"},where:{isNeed:!1,dataType:"string"},inputGeometry:{isNeed:!1,dataType:"Object"},inputSrid:{isNeed:!1,dataType:"string"},spatialRel:{isNeed:!1,dataType:"string"},maxDistance:{isNeed:!1,dataType:"string"},relation:{isNeed:!1,dataType:"Array"},sort:{isNeed:!1,dataType:"string"},limit:{isNeed:!1,dataType:"number"}})},e.prototype.queryMulti=function(e){if(!(e instanceof Array))return Promise.reject("参数应为数组 ");return g.call(this,"/query/multi","get",{tables:JSON.stringify(e)})},e.prototype.queryDistinct=function(e,t){if("string"!=typeof e||!e.trim())return Promise.reject("参数table有误");if("string"!=typeof t||!t.trim())return Promise.reject("参数field有误");var r="/query/distinct/"+e+"/"+t;return g.call(this,r,"get")},e.prototype.queryAttachment=function(e,t,r){if("string"!=typeof e||!e.trim())return Promise.reject("参数table有误");if("string"!=typeof t||!t.trim())return Promise.reject("参数recordId有误");var a="/query/attachment/"+e+"/"+t;return f.call(this,a,e,r,null,{name:{isNeed:!1,dataType:"string"},type:{isNeed:!1,dataType:"number"}})},e.prototype.queryRelation=function(e){},e}();function h(e){this.init(e)}h.prototype.constructor=h,h.prototype.init=function(e){this.serverObj=i.a.create(e),this.filter()},h.prototype.filter=function(){this.serverObj.interceptors.response.use(function(e){if(e.data&&"success"==e.data.code)return e.data.data;if(e.data&&"error"==e.data.code)throw new Error(e.data.msg)})};var T=h;var N=o.checkParam,v=o.returnResult,b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.request=t}return e.prototype.deleteDatamanage=function(e,t){if("string"!=typeof e||!e.trim())return Promise.reject("参数id有误");var r="/datamanage/table/"+e;return N.call(this,r,e,t,null,{physical:{isNeed:!1,dataType:"boolean"}},"delete")},e.prototype.getDatamanage=function(e,t){if("string"!=typeof e||!e.trim())return Promise.reject("参数id有误");var r="/datamanage/table/"+e;return N.call(this,r,e,t,null,{orgcode:{isNeed:!1,dataType:"string"}})},e.prototype.updateDatamanage=function(e,t){if("string"!=typeof e||!e.trim())return Promise.reject("参数id有误");var r="/datamanage/table/"+e;return N.call(this,r,e,t,null,{name:{isNeed:!1,dataType:"string"},alias:{isNeed:!1,dataType:"string"},comment:{isNeed:!1,dataType:"string"},senderOrg:{isNeed:!1,dataType:"string"},srid:{isNeed:!1,dataType:"string"},hasAttachment:{isNeed:!1,dataType:"boolean"},attachmentType:{isNeed:!1,dataType:"string"},tag:{isNeed:!1,dataType:"string"}},"put")},e.prototype.getDMList=function(e){return N.call(this,"/datamanage/table",null,e,null,{orgcode:{isNeed:!1,dataType:"string"},catalogNode:{isNeed:!1,dataType:"string"},name:{isNeed:!1,dataType:"string"},alias:{isNeed:!1,dataType:"string"},keyword:{isNeed:!1,dataType:"string"},creatorId:{isNeed:!1,dataType:"string"},creatorOrg:{isNeed:!1,dataType:"string"},senderOrg:{isNeed:!1,dataType:"string"},type:{isNeed:!1,dataType:"string"},srid:{isNeed:!1,dataType:"string"},hasAttachment:{isNeed:!1,dataType:"boolean"},createTime:{isNeed:!1,dataType:"string"},tag:{isNeed:!1,dataType:"string"},includeFields:{isNeed:!1,dataType:"boolean"},pageIndex:{isNeed:!1,dataType:"number"},pageSize:{isNeed:!1,dataType:"number"},sort:{isNeed:!1,dataType:"Array"}})},e.prototype.createDatamanage=function(e){return N.call(this,"/datamanage/table",null,e,{name:{isNeed:!0,dataType:"string"},alias:{isNeed:!0,dataType:"string"},creator:{isNeed:!0,dataType:"string"},creatorOrg:{isNeed:!0,dataType:"string"},type:{isNeed:!0,dataType:"number"}},{senderOrg:{isNeed:!1,dataType:"string"},srid:{isNeed:!1,dataType:"string"},comment:{isNeed:!1,dataType:"string"},hasAttachment:{isNeed:!1,dataType:"boolean"},attachmentType:{isNeed:!1,dataType:"string"},tag:{isNeed:!1,dataType:"string"},fields:{isNeed:!1,dataType:"Array"}},"post")},e.prototype.tableRecovery=function(e){if("string"!=typeof e||!e.trim())return Promise.reject("参数id有误");var t="/datamanage/table/recovery/"+e;return v.call(this,t,"post")},e.prototype.deleteField=function(e,t){if("string"!=typeof e||!e.trim())return Promise.reject("参数id有误");var r="/datamanage/field/"+e;return N.call(this,r,e,t,null,{physical:{isNeed:!1,dataType:"boolean"}},"delete")},e.prototype.getField=function(e){if("string"!=typeof e||!e.trim())return Promise.reject("参数id有误");var t="/datamanage/field/"+e;return v.call(this,t)},e.prototype.updateField=function(e,t){if("string"!=typeof e||!e.trim())return Promise.reject("参数id有误");var r="/datamanage/field/"+e;return N.call(this,r,e,t,null,{name:{isNeed:!1,dataType:"string"},alias:{isNeed:!1,dataType:"string"},comment:{isNeed:!1,dataType:"string"},type:{isNeed:!1,dataType:"string"},length:{isNeed:!1,dataType:"number"},precision:{isNeed:!1,dataType:"number"},default:{isNeed:!1,dataType:"string"},isRequired:{isNeed:!1,dataType:"boolean"},isPk:{isNeed:!1,dataType:"boolean"},dict:{isNeed:!1,dataType:"string"},orderNum:{isNeed:!1,dataType:"number"}},"put")},e.prototype.getFieldList=function(e){return N.call(this,"datamanage/field",null,e,{tableId:{isNeed:!0,dataType:"string"}},{orgcode:{isNeed:!1,dataType:"string"},name:{isNeed:!1,dataType:"string"},alias:{isNeed:!1,dataType:"string"},keyword:{isNeed:!1,dataType:"string"},type:{isNeed:!1,dataType:"string"},returnGeomField:{isNeed:!1,dataType:"boolean"},isRequired:{isNeed:!1,dataType:"boolean"},isPk:{isNeed:!1,dataType:"boolean"},hasDict:{isNeed:!1,dataType:"boolean"},dict:{isNeed:!1,dataType:"string"},state:{isNeed:!1,dataType:"number"},pageIndex:{isNeed:!1,dataType:"number"},pageSize:{isNeed:!1,dataType:"number"},sort:{isNeed:!1,dataType:"Array"}})},e.prototype.createdField=function(e){return N.call(this,"datamanage/field",null,e,{tableId:{isNeed:!0,dataType:"string"},orgcode:{isNeed:!0,dataType:"string"},name:{isNeed:!0,dataType:"string"},alias:{isNeed:!0,dataType:"string"},type:{isNeed:!0,dataType:"string"}},{length:{isNeed:!1,dataType:"number"},precision:{isNeed:!1,dataType:"number"},default:{isNeed:!1,dataType:"string"},comment:{isNeed:!1,dataType:"string"},isRequired:{isNeed:!1,dataType:"boolean"},isPk:{isNeed:!1,dataType:"boolean"},dict:{isNeed:!1,dataType:"string"},orderNum:{isNeed:!1,dataType:"number"}},"post")},e.prototype.fieldRecovery=function(e){if("string"!=typeof e||!e.trim())return Promise.reject("参数id有误");var t="/datamanage/field/recovery/"+e;return v.call(this,t,"post")},e.prototype.createdFieldsBatch=function(e){return N.call(this,"datamanage/fields",null,e,{tableId:{isNeed:!0,dataType:"string"},orgcode:{isNeed:!0,dataType:"string"},fields:{isNeed:!0,dataType:"Array"}},null,"post")},e.prototype.updateFieldsBatch=function(e){return N.call(this,"datamanage/fields",null,e,{tableId:{isNeed:!0,dataType:"string"},fields:{isNeed:!0,dataType:"Array"}},null,"put")},e.prototype.getDictionaryList=function(e){return N.call(this,"/datamanage/dictionary",null,e,null,{name:{isNeed:!1,dataType:"string"},alias:{isNeed:!1,dataType:"string"},displayForm:{isNeed:!1,dataType:"number"},pageIndex:{isNeed:!1,dataType:"number"},pageSize:{isNeed:!1,dataType:"number"},sort:{isNeed:!1,dataType:"Array"}})},e.prototype.createdDictionary=function(e){return N.call(this,"datamanage/field",null,e,{name:{isNeed:!0,dataType:"string"},relField:{isNeed:!0,dataType:"string"},nameField:{isNeed:!0,dataType:"string"}},{alias:{isNeed:!1,dataType:"string"},displayForm:{isNeed:!1,dataType:"number"},parentField:{isNeed:!1,dataType:"string"},filter:{isNeed:!1,dataType:"string"},description:{isNeed:!1,dataType:"string"}},"post")},e.prototype.deleteDictionary=function(e){if("string"!=typeof e||!e.trim())return Promise.reject("参数id有误");var t="/datamanage/dictionary/"+e;return v.call(this,t,"delete")},e.prototype.getDictionary=function(e){if("string"!=typeof e||!e.trim())return Promise.reject("参数id有误");var t="/datamanage/dictionary/"+e;return v.call(this,t)},e.prototype.updateDictionary=function(e,t){if("string"!=typeof e||!e.trim())return Promise.reject("参数id有误");var r="/datamanage/dictionary/"+e;return N.call(this,r,e,t,null,{name:{isNeed:!1,dataType:"string"},alias:{isNeed:!1,dataType:"string"},relField:{isNeed:!1,dataType:"string"},nameField:{isNeed:!1,dataType:"string"},displayForm:{isNeed:!1,dataType:"number"},parentField:{isNeed:!1,dataType:"string"},filter:{isNeed:!1,dataType:"string"},description:{isNeed:!1,dataType:"string"}},"put")},e.prototype.getDictionaryData=function(e,t){if("string"!=typeof e||!e.trim())return Promise.reject("参数id有误");var r="/datamanage/dictionary/data/"+e;return N.call(this,r,e,t,null,{select:{isNeed:!1,dataType:"string"}})},e}();var j=o.checkParam,P=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.request=t}return e.prototype.createRecord=function(e,t){if("string"!=typeof e||!e.trim())return Promise.reject("参数tableId有误");var r="/dataedit/"+e;return j.call(this,r,e,t,{records:{isNeed:!0,dataType:"Array"}},{orgcode:{isNeed:!1,dataType:"string"}},"post")},e.prototype.updateRecord=function(e,t){if("string"!=typeof e||!e.trim())return Promise.reject("参数tableId有误");var r="/dataedit/"+e;return j.call(this,r,e,t,{records:{isNeed:!0,dataType:"Array"}},{orgcode:{isNeed:!1,dataType:"string"}},"put")},e.prototype.deleteRecord=function(e,t,r){if("string"!=typeof e||!e.trim())return Promise.reject("参数tableId有误");if("string"!=typeof t||!t.trim())return Promise.reject("参数recordId有误");var a="/dataedit/"+e+"/"+t;return j.call(this,a,e,r,null,{orgcode:{isNeed:!1,dataType:"string"}},"delete")},e}();var w=o.checkParam,S=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.request=t}return e.prototype.relation=function(e,t){if("string"!=typeof e||!e.trim())return Promise.reject("参数table有误");var r="/datamanage/relation/"+e;return w.call(this,r,e,t,null,{keyword:{isNeed:!1,dataType:"string"}})},e.prototype.deleteRelation=function(e){return w.call(this,"/datamanage/relation",null,e,null,{parentTable:{isNeed:!1,dataType:"string"},childTable:{isNeed:!1,dataType:"string"}},"delete")},e.prototype.createdRelation=function(e){return w.call(this,"/datamanage/relation",null,e,{parentTable:{isNeed:!0,dataType:"string"},parentTableField:{isNeed:!0,dataType:"string"},childTable:{isNeed:!0,dataType:"string"},childTableField:{isNeed:!0,dataType:"string"}},null,"post")},e}();var O=o.downFile,x=o.uploadFile,E=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.request=t}return e.prototype.importFields=function(e,t,r){if("string"!=typeof e||!e.trim())return Promise.reject("参数tableId有误");if(!(t instanceof Object))return Promise.reject("参数fileData应为文件对象");var a="/imexport/import/fields/"+e;return x.call(this,a,e,t,r,null,{importData:{isNeed:!1,dataType:"boolean"},orgcode:{isNeed:!1,dataType:"string"}})},e.prototype.exportFields=function(e,t,r){if("string"!=typeof e||!e.trim())return Promise.reject("参数ipPort有误");if("string"!=typeof t||!t.trim())return Promise.reject("参数tableId有误");var a=e+"/imexport/export/fields/"+t;return O.call(this,a,t,r,null,{fileName:{isNeed:!1,dataType:"string"},fileType:{isNeed:!1,dataType:"string"},orgcode:{isNeed:!1,dataType:"string"}})},e.prototype.importData=function(e,t,r){if("string"!=typeof e||!e.trim())return Promise.reject("参数tableId有误");if(!(t instanceof Object))return Promise.reject("参数fileData应为文件对象");var a="/imexport/import/data/"+e;return x.call(this,a,e,t,r,null,{operation:{isNeed:!1,dataType:"string"},orgcode:{isNeed:!1,dataType:"string"}})},e.prototype.exportData=function(e,t,r){if("string"!=typeof e||!e.trim())return Promise.reject("参数ipPort有误");if("string"!=typeof t||!t.trim())return Promise.reject("参数tableId有误");var a=e+"/imexport/export/data/"+t;return O.call(this,a,t,r,null,{fileName:{isNeed:!1,dataType:"string"},fileType:{isNeed:!1,dataType:"string"},select:{isNeed:!1,dataType:"string"},id:{isNeed:!1,dataType:"string"},where:{isNeed:!1,dataType:"string"},inputGeometry:{isNeed:!1,dataType:"Object"},inputSrid:{isNeed:!1,dataType:"string"},spatialRel:{isNeed:!1,dataType:"string"},relation:{isNeed:!1,dataType:"Array"},sort:{isNeed:!1,dataType:"string"},limit:{isNeed:!1,dataType:"number"},orgcode:{isNeed:!1,dataType:"string"}})},e}();var R=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t;var r=new T(t).serverObj;this.catalog=new y(r),this.query=new m(r),this.statistics=new c(r),this.datamanageMata=new b(r),this.datamanageDataedit=new P(r),this.datamanageBusiness=new S(r),this.importExport=new E(r)};var q=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.request=t}return e.prototype.query=function(e){},e.prototype.queryMulti=function(e){},e}();var k=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.request=t}return e.prototype.aggregate=function(e){},e.prototype.aggregateMulti=function(e){},e}();var F=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t;var r=new T(t).serverObj;this.query=new q(r),this.statistics=new k(r)};var I=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.request=t}return e.prototype.identify=function(e,t,r){var a=e.layer.url+"/identify",i={},n={f:"pjson",sr:4326,tolerance:3,returnGeometry:!0,returnZ:!1,returnM:!1,gdbVersion:null};for(var s in jQuery.extend(!0,n,e||{}),n)i.hasOwnProperty(s)&&(n[i[s]]=n[s],delete n[s]);jQuery.ajax({url:a,data:n,type:"get",dataType:"json",success:function(e){e.error?t&&t.call(r,new Error(e.error.message)):t&&t.call(r,null,e)},error:function(e){t&&t.call(r,new Error(e))}})},e.prototype.getFeatures=function(e,t,r){var a=e.layer.url+"/"+e.layer.params.queryLayer+"/query",i={select:"outFields",sort:"orderByFields",ids:"objectIds"},n={where:"1=1",text:"",objectIds:null,time:null,geometry:null,geometryType:"esriGeometryEnvelope",inSR:null,spatialRel:"esriSpatialRelIntersects",relationParam:null,outFields:"",returnGeometry:!1,maxAllowableOffset:null,geometryPrecision:null,outSR:null,returnIdsOnly:!1,returnCountOnly:!1,orderByFields:"",groupByFieldsForStatistics:null,outStatistics:null,returnZ:!1,returnM:!1,gdbVersion:null,returnDistinctValues:!1,f:"pjson"};for(var s in jQuery.extend(!0,n,e||{}),n)i.hasOwnProperty(s)&&(n[i[s]]=n[s],delete n[s]);if(n.geometry){var o={},d="";switch(delete(o=ArcGISToGeoJSON.geojsonToArcGIS(n.geometry)).spatialReference,n.geometry.type.toUpperCase()){case"POLYGON":case"MULTIPOLYGON":d="esriGeometryPolygon"}n.geometryType=d,n.geometry=JSON.stringify(o)}jQuery.ajax({url:a,data:n,type:"get",dataType:"json",success:function(e){e.error?t&&t.call(r,new Error(e.error.message)):t&&t.call(r,null,e)},error:function(e){t&&t.call(r,new Error(e))}})},e}();var A=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t;var r=new T(t).serverObj;this.arcgisrest=new I(r),console.log(this)};var G=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t;var r=new T(t);this.request=r.serverObj}return e.prototype.identify=function(e,t,r){jQuery.ajax({url:this.options.url,data:e,type:"get",dataType:"json",success:function(e){e.error?t&&t.call(r,new Error(e.error.message)):t&&t.call(r,null,e)},error:function(e){t&&t.call(r,new Error(e))}})},e.prototype.getFeatures=function(e){},e}();var C=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.opts=t}return e.prototype.poiSearch=function(e){var t=this;return new Promise(function(r,a){var i=t.opts.options.searchUrl,n=encodeURI(e.keyWord),s=e.bound.minx+","+e.bound.miny+","+e.bound.maxx+","+e.bound.maxy,o=(e.page_num-1)*e.page_size,d='?postStr={"keyWord":"'+n+'","level":"'+e.level+'","queryTerminal":"10000",';d+='"mapBound":"'+s+'",',d+='"queryType":"'+e.queryType+'","count":"'+e.page_size+'","start":"'+o+'"}&type=query&tk='+t.opts.options.tk,t._request(i,d).then(function(e){if(1==e.resultType&&e.pois&&e.pois.length>0){for(var t=[],i=0;i<e.pois.length;i++){var n=e.pois[i],s=parseFloat(e.pois[i].lonlat.split(" ")[1]),o=parseFloat(e.pois[i].lonlat.split(" ")[0]),d=e.pois[i].phone;s&&o&&0!==s&&0!==o&&(n.location={lat:s,lon:o},n.longitude=o,n.latitude=s,n.title=e.pois[i].name,n.telephone=d,n.address=e.pois[i].address,t.push(n))}r({pois:t,count:parseInt(e.count)})}else 1==e.resultType&&e.pois&&0==e.pois.length?r({pois:[],count:0,msg:"暂无数据！"}):2==e.resultType?r({pois:[],count:0,msg:"请放大到城市级别再查询！"}):a(new Error("查询出错！"))}).catch(function(e){a(new Error(e))})})},e.prototype.pathSearch=function(e){var t=this;return new Promise(function(r,a){var i=t.opts.options.pathUrl,n=void 0,s=e.stops,o=s[0].x+","+s[0].y,d=s[s.length-1].x+","+s[s.length-1].y;if(2==s.length)n='?postStr={"orig":"'+o+'","dest":"'+d+'",',n+='"style":"'+e.style+'"}&type=search&tk='+t.opts.options.tk;else if(s.length>2){n='?postStr={"orig":"'+o+'","dest":"'+d+'",',n+='"mid":"';for(var l=1;l<s.length-1;l++){if(l<s.length-2)n+=s[l].x+","+s[l].y+";";else n+=s[l].x+","+s[l].y+'",'}n+='"style":"'+e.style+'"}&type=search&tk='+t.opts.options.tk}t._request(i,n).then(function(e){var t=e,a=null;if(!window.DOMParser&&window.ActiveXObject)for(var i=["MSXML.2.DOMDocument.6.0","MSXML.2.DOMDocument.3.0","Microsoft.XMLDOM"],n=0;n<i.length;n++)try{(a=new ActiveXObject(i[n])).async=!1,a.loadXML(t);break}catch(e){}else{if(!(window.DOMParser&&document.implementation&&document.implementation.createDocument))return null;try{a=(new DOMParser).parseFromString(t,"text/xml")}catch(e){}}for(var s=new g2.sfs.Path({spatialReference:g2.sfs.EnumSpatialReference.EPSG4326}),o=new g2.sfs.Polyline({spatialReference:g2.sfs.EnumSpatialReference.EPSG4326}),d=a.getElementsByTagName("routelatlon")[0].childNodes[0].data,l=d.split(";"),c=0;c<l.length;c++)if(l[c]){var p=l[c].split(","),u={x:parseFloat(p[0]),y:parseFloat(p[1])},y=new g2.sfs.Point({x:u.x,y:u.y,spatialReference:g2.sfs.EnumSpatialReference.EPSG4326});s.addPoint(y)}o.addGeometry(s);for(var f=a.getElementsByTagName("distance")[0].childNodes[0].data,g=a.getElementsByTagName("routes")[0].getElementsByTagName("item"),m=[],h=l[0],T=0;T<g.length;T++){var N=g[T].getElementsByTagName("strguide")[0].textContent,v=g[T].getElementsByTagName("turnlatlon")[0].textContent,b=d.indexOf(h),j=d.indexOf(v),P=d.substring(b,j+v.length),w="";w=N.indexOf("右转")>-1?"右转":N.indexOf("左转")>-1?"左转":"直行",h=v;for(var S=new g2.sfs.Path({spatialReference:g2.sfs.EnumSpatialReference.EPSG4326}),O=new g2.sfs.Polyline({spatialReference:g2.sfs.EnumSpatialReference.EPSG4326}),x=P.split(";"),E=0;E<x.length;E++){var R=x[E].split(","),q={x:parseFloat(R[0]),y:parseFloat(R[1])};if(q.x&&q.y){var k=new g2.sfs.Point({x:q.x,y:q.y,spatialReference:g2.sfs.EnumSpatialReference.EPSG4326});S.addPoint(k)}}O.addGeometry(S);var F={strguide:N,road:O,poly:O,direct:w};m.push(F)}var I={route:o,road:m,length:parseFloat(f)};r(I)}).catch(function(e){a(new Error(e))})})},e.prototype._request=function(e,t){var r=i.a.CancelToken.source(),a=this.opts.request.request({url:e+t,method:"get",cancelToken:r.token});return a.cancel=r.cancel,a},e}();function D(e){this.init(e)}D.prototype.constructor=D,D.prototype.init=function(e){this.serverObj=i.a.create(e),this.filter()},D.prototype.filter=function(){this.serverObj.interceptors.response.use(function(e){if(e.data)return e.data;throw new Error(e.data)})};var M=D;var _=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=new M(t).serverObj;this.mapService=new C({request:r,options:t})};var J=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.opts=t}return e.prototype.poiSearch=function(e){var t=this;return new Promise(function(r,a){var i=t.opts.options.searchUrl,n="?keywords="+encodeURI(e.keyWord)+"&polygon="+(e.bound.minx+","+e.bound.miny+"|"+e.bound.minx+","+e.bound.maxy+"|"+e.bound.maxx+","+e.bound.maxy+"|"+e.bound.maxx+","+e.bound.miny+"|"+e.bound.minx+","+e.bound.miny);n+="&offset="+e.page_size+"&page="+e.page_num+"&output=JSON&key="+t.opts.options.tk,t._request(i,n).then(function(t){if("OK"==t.info&&t.pois&&t.pois.length>0){for(var i=[],n=0;n<t.pois.length&&i.length<e.page_size;n++){var s=t.pois[n],o=parseFloat(t.pois[n].location.split(",")[1]),d=parseFloat(t.pois[n].location.split(",")[0]),l=t.pois[n].tel;o&&d&&0!==o&&0!==d&&(s.location={lat:o,lon:d},s.longitude=d,s.latitude=o,s.title=t.pois[n].name,s.telephone=l,s.address=t.pois[n].address,i.push(s))}var c={pois:i,count:parseInt(t.count)};r(c)}else if("OK"==t.info){r({pois:[],count:0,msg:"暂无数据！"})}else a(new Error("查询出错！"))}).catch(function(e){a(new Error(e))})})},e.prototype.pathSearch=function(e){var t=this;return new Promise(function(r,a){var i=t.opts.options.pathUrl,n=void 0,s=e.stops,o=s[0].x+","+s[0].y,d=s[s.length-1].x+","+s[s.length-1].y;if(2==s.length)n="?origin="+o+"&destination="+d;else if(s.length>2){n="?origin="+o+"&destination="+d,n+="&waypoints=";for(var l=1;l<s.length-1;l++)l<s.length-2?n+=s[l].x+","+s[l].y+";":n+=s[l].x+","+s[l].y+","}0==e.style?n+="&strategy=0":1==e.style?n+="&strategy=2":2==e.style&&(n+="&strategy=13"),n+="&extensions=all&output=JSON&key="+t.opts.options.tk,t._request(i,n).then(function(e){if("OK"==e.info){for(var t=new g2.sfs.Path({spatialReference:g2.sfs.EnumSpatialReference.EPSG4326}),a=new g2.sfs.Polyline({spatialReference:g2.sfs.EnumSpatialReference.EPSG4326}),i=e.route.paths,n=i[0].distance,s=(i[0].duration,[]),o=i[0].steps,d=0;d<o.length;d++)if(o[d]){for(var l=new g2.sfs.Path({spatialReference:g2.sfs.EnumSpatialReference.EPSG4326}),c=new g2.sfs.Polyline({spatialReference:g2.sfs.EnumSpatialReference.EPSG4326}),p=o[d].polyline.split(";"),u=0;u<p.length;u++){var y={x:parseFloat(p[u].split(",")[0]),y:parseFloat(p[u].split(",")[1])},f=new g2.sfs.Point({x:y.x,y:y.y,spatialReference:g2.sfs.EnumSpatialReference.EPSG4326});t.addPoint(f),l.addPoint(f)}c.addGeometry(l);var g={strguide:o[d].instruction,length:parseFloat(o[d].distance)/1e3,road:c,poly:c,direct:o[d].action};s.push(g)}a.addGeometry(t),r({route:a,road:s,length:n/1e3})}}).catch(function(e){a(new Error(e))})})},e.prototype._request=function(e,t){var r=i.a.CancelToken.source(),a=this.opts.request.request({url:e+t,method:"get",cancelToken:r.token});return a.cancel=r.cancel,a},e}();var B=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=new M(t).serverObj;this.mapService=new J({request:r,options:t})},L=r(1),U=r.n(L);var z=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.opts=t}return e.prototype.poiSearch=function(e){var t=this;return new Promise(function(r,a){var i=t.opts.options.searchUrl,n="?query="+encodeURI(e.keyWord)+"&bounds="+(e.bound.miny+","+e.bound.minx+","+e.bound.maxy+","+e.bound.maxx);n+="&page_size="+e.page_size+"&page_num="+e.page_num+"&scope=2&coord_type=wgs84ll&output=json&ak="+t.opts.options.tk,t._request(i,n).then(function(e){if("ok"==e.message&&e.results&&e.results.length>0){for(var t=[],a=0;a<e.results.length;a++){var i=e.results[a],n=e.results[a].location.lat,s=e.results[a].location.lng;n&&s&&0!==n&&0!==s&&(i.location={lat:n,lon:s},i.longitude=s,i.latitude=n,i.title=e.results[a].name,i.telephone="",i.address=e.results[a].address,t.push(i))}var o={pois:t,count:e.total};r(o)}else if("ok"==e.message&&0==e.total){r({pois:[],count:0})}}).catch(function(e){a(new Error(e))})})},e.prototype.pathSearch=function(e){var t=this;return new Promise(function(r,a){var i=t.opts.options.pathUrl,n=void 0,s=e.stops,o=s[0].y+","+s[0].x,d=s[s.length-1].y+","+s[s.length-1].x;if(2==s.length)n="?origin="+o+"&destination="+d;else if(s.length>2){n="?origin="+o+"&destination="+d,n+="&waypoints=";for(var l=1;l<s.length-1;l++)l<s.length-2?n+=s[l].y+","+s[l].x+"|":n+=s[l].y+","+s[l].x}0==e.style?n+="&tactics=0":1==e.style?n+="&tactics=7":2==e.style&&(n+="&tactics=3"),n+="&coord_type=gcj02&ret_coordtype=gcj02&ak="+t.opts.options.tk,t._request(i,n).then(function(e){if("成功"==e.message&&e.result&&e.result.routes[0]){for(var t=e.result.routes[0],a=t.distance,i=(t.duration,new g2.sfs.Path({spatialReference:g2.sfs.EnumSpatialReference.EPSG4326})),n=new g2.sfs.Polyline({spatialReference:g2.sfs.EnumSpatialReference.EPSG4326}),s=[],o=t.steps,d=0;d<o.length;d++)if(o[d]){for(var l=new g2.sfs.Path({spatialReference:g2.sfs.EnumSpatialReference.EPSG4326}),c=new g2.sfs.Polyline({spatialReference:g2.sfs.EnumSpatialReference.EPSG4326}),p=o[d].path.split(";"),u=0;u<p.length;u++){var y={x:parseFloat(p[u].split(",")[0]),y:parseFloat(p[u].split(",")[1])},f=new g2.sfs.Point({x:y.x,y:y.y,spatialReference:g2.sfs.EnumSpatialReference.EPSG4326});i.addPoint(f),l.addPoint(f)}var g=o[d].direction,m=void 0,h=void 0;0==g?m="正北":1==g||2==g?m="东北":3==g?m="正东":4==g||5==g?m="东南":6==g?m="正南":7==g||8==g?m="西南":9==g?m="正西":10!=g&&11!=g||(m="西北");var T=(h=s[d-1]?30*g-s[d-1].direction>10?"右转":30*g-s[d-1].direction<-10?"左转":"直行":"直行")+"，向"+m+"方向，进入"+o[d].road_name+"，行驶"+Math.round(o[d].distance/1e3,2)+"公里";c.addGeometry(l);var N={strguide:T,length:o[d].distance/1e3,road:c,poly:c,direction:30*g,direct:h};s.push(N)}n.addGeometry(i),r({route:n,road:s,length:a/1e3})}}).catch(function(e){a(new Error(e))})})},e.prototype._request=function(e,t){var r=i.a.CancelToken.source(),a=this.opts.request.request({url:e+t,adapter:U.a,method:"get",cancelToken:r.token});return a.cancel=r.cancel,a},e}();var X=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=new M(t).serverObj;this.mapService=new z({request:r,options:t})},Q=window.G||{};Q.services=Q.services||{},Q.services.EMapService=R,Q.services.EMapServiceV2=F,Q.services.ArcGISService=A,Q.services.WmsService=G,Q.services.TiandituService=_,Q.services.GaodeService=B,Q.services.BaiduService=X,window.G=Q;t.default=Q.services}]);